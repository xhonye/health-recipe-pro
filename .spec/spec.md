# 功能需求说明书：高级健康食谱专家

## 1. 功能：智能食谱生成器

* **触发条件**：点击“生成/刷新”按钮。
* **核心逻辑**：
* 从 `foodDatabase` 中随机抽取 3 种蛋白质、2 种碳水、3 种蔬菜和 2 种油脂。
* 确保同批次内无重复项。


* **展示形式**：渲染卡片以显示名称（`name`）、营养成分（`nutrient`）和营养素参考值（`nrv`）。

---

## 2. 功能：数据管理面板

* **入口**：右下角悬浮设置图标。
* **视图**：以表格形式列出 `localStorage` 中的所有食品。
* **添加操作**：包含验证机制的表单（所有字段均为必填）。
* **保存逻辑**：新项目必须推送到 `foodDatabase` 并同步至 `localStorage`。

---

## 3. 功能：持久化层

* **加载时**：检查 `localStorage`。若为空，则加载 80 个默认初始项。
* **变更时**：任何新增项操作必须触发 `localStorage.setItem` 更新。

---

## 4. 初始种子数据（部分示例）

* **蛋白质**：`[ {id: 1, name: "鸡胸肉", category: "Protein", nutrient: "优质蛋白", amount: 20, unit: "g", nrv: 40}, ... ]`
* （执行端必须根据规定补全完整的 80 项数据集）

---

## 5. 核心逻辑

### Data Strategy
* **数据源**：核心数据源为 `data/foods.csv`。
* **加载机制**：网页运行时通过 `fetch` API 异步读取该 CSV 文件。
* **解析逻辑**：将 CSV 文本解析为 JSON 对象数组（需处理 `amount` 和 `nrv` 的数值转换），并存入 `localStorage` 作为初始数据。
